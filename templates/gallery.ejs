<%- layout('base') %> 

<%- block('styles') %>
<link rel="stylesheet" href="css/gallery.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
<!-- <section class="page-header">
  <h1>Font Pairing Gallery</h1>
  <p>Explore beautiful font combinations curated by our AI and the design community.</p>
</section> -->

<!-- Search Bar & Category Filters -->
<div id="searchFilterContainer">
  <div class="input-group search-bar">
    <input type="text" id="fontSearch" placeholder="Search fonts..." />
    <button class="btn btn" id="searchBtn">
      <i class="bi bi-search"></i>
    </button>
  </div>

  <div class="filter-buttons">
    <button class="filter-btn" data-category="">All</button>
    <button class="filter-btn" data-category="serif">Serif</button>
    <button class="filter-btn" data-category="sans-serif">Sans-serif</button>
    <button class="filter-btn" data-category="display">Display</button>
    <button class="filter-btn" data-category="handwriting">Handwriting</button>
    <button class="filter-btn" data-category="monospace">Monospace</button>
  </div>
</div>


<!-- Link your separate CSS -->
<!-- <link rel="stylesheet" href="css/search-bar.css" /> -->



<div class="gallery-grid" id="fontGallery"></div>

<%- block('scripts') %>
<script>
document.addEventListener("DOMContentLoaded", async function () {
  const gallery = document.getElementById("fontGallery");
  const apiKey = "AIzaSyAXoavmfcp9-DwIUY1jsmn7thegcy9-_80"; // replace with your key
  let fontsToUse = [];


  async function fetchGoogleFonts() {
    try {
      const response = await fetch(`https://www.googleapis.com/webfonts/v1/webfonts?key=${apiKey}&sort=popularity`);
      const data = await response.json();

      // Shuffle top fonts and take first 10
      fontsToUse = data.items.sort(() => Math.random() - 0.5).slice(0, 20);

      // Dynamically add Google Fonts link
      const link = document.createElement("link");
      link.href = `https://fonts.googleapis.com/css2?${fontsToUse.map(f => `family=${encodeURIComponent(f.family)}`).join("&")}&display=swap`;
      link.rel = "stylesheet";
      document.head.appendChild(link);

      renderFonts();
    } catch (error) {
      console.error("Error fetching fonts:", error);
      gallery.innerHTML = '<div class="error">Failed to load fonts. Please try again later.</div>';
    }
  }

  function renderFonts() {
    gallery.innerHTML = "";

    fontsToUse.forEach(font => {
      const card = document.createElement("div");
      card.className = "font-pair-card";
      card.innerHTML = `
        <div class="pair-header" style="font-family: '${font.family}', ${font.category}">${font.family}</div>
        <div class="pair-subheader" style="font-family: '${font.family}', ${font.category}">The quick brown fox jumps over the lazy dog</div>
        <div class="pair-body" style="font-family: '${font.family}', ${font.category}">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</div>
        <div class="pair-footer">
          <div class="font-name">${font.family} <span class="font-category">${font.category}</span></div>
        </div>
      `;
      gallery.appendChild(card);
    });
  }

  fetchGoogleFonts();
});
</script>
